1) 표지
안녕하십니까 스마트폰을 이용한 차량번호 인식
및 리콜 정보조회 App 프로젝트 중간발표를 맡은 정세희 입니다.

2) 목차
발표는 이러이러한 순서로 진행하겠습니다
--------------------------------------------------------------------------------------

3) 진행상황
저희는 현재 촬영 된 이미지를 바탕으로 차량번호를 인식하는 부분은  python으로 구현하고
있어 임시로 차량번호를 넘겨준 뒤 해당하는 차량번호에 대한 리콜정보와 무상수리 내역을
HTML Parsing을 통해 JSON으로 받은 정보를 APP으로 나타내는 부분까지 구현을 완료하였습니다.


개발과정을 설명하겠습니다

<카메라 기능 구현>
- React Native의 vision-camera 라이브러리를 사용하여 틀에 맞춰 자동차 번호판을 촬영할 수 있도록
구현하였습니다.
PartsNoCamera Class는 CameraX를 기반으로
카메라 위에 번호판을 촬영할 수 있는 틀을 넣고 리스너 함수를 통해 
틀에 맞춰 사진을 잘라 URI를 서버로 전송할 수 있도록, 사진을 찍으면 바로 카메라가
꺼지면서 정보를 볼 수 있도록 구현하였습니다. 

camera X에서는 촬영의 기능만 담당을 하고 있어 번호를 인식하고자 하는 틀의 크기를 PartsNoCamera에서 지정해줘야합니다.
CameraX 에서 hasOwnProperty를 통해 리스너가 존재하는지 판단을 하여 틀의 style과  없으면 uri를 받는 리스너가 없으면 이전창으로 돌아가게 구현했습니다
모든 조건을 충족하게되면 안드로이드 모듈이 호출되어 번호판을 인식하는 부분의 사진을 잘라내어 인식하게 되며 카메라 창에서 나오게 됩니다. 

<검색을 위한 URI 찾기>
먼저 차량 번호판 검색을 위한 URL을 찾기 위해 저희는 자동차 리콜 센터 홈페이지에 접속하여
페이지 소스보기를 통해 검색 버튼의 id를 찾은 후 id값인 알티서치버튼인 id값으로 타고 들어가
검색 URL과 번호판을 넘겨줄 수 있는 data를 찾아낼 수 있었습니다.

<번호판 검색 시 나오는 HTML>
차량 번호판을 검색 시 자동차 리콜 센터 홈페이지에서 리콜현황과 무상점검수리 내역을 볼 수 있습니다.
이 또한 HTML을 얻어올 수 있도록 페이지 소스에서 필요한 값들을 하나하나 찾아 내었습니다.

<검색 URL을 토대로 차량번호를 검색한 HTML 얻어오기>
찾아낸 URL과 데이터를 기반으로 임시 번호판인 06머5954의 차량 번호판 HTML을 얻어올 수 있도록 구현하였고
그 결과 모든 HTML을 출력할 수 있었습니다.

<원하는 정보 Parsing>
모든 HTML이 아닌 필요한 정보들만 가져오기 위해 HTML Parsing을 도와주는 Jsoup 라이브러리를 사용하여 Html 파싱을 진행하였습니다.
임시 번호판을 넘겨주고 Jsoup 라이브러리를 통해 리콜현황, 개시일, 무상점검수리내역만 뽑을 수 있도록 구현하였습니다. 그 결과
해당 번호판의 리콜 정보들을 출력해볼 수 있었습니다.

<Parsing 정보 Json변환> 
다음은 해당하는 차량번호의 Parsing 결과를 Json으로 변환해줄 수 있도록 구현한 소스입니다.
리콜이나 무상수리 내역이 없는 경우 element 값을 null으로 주어 success값을 0으로 받을 수 있게 하였고
리콜이나 무상수리 내역이 있는 경우 모든 element를 가져올 수 있도록 하였습니다. 없을 경우에는 가져오지 않습니다
리콜과 무상수리에 대한 모든 element에 대해 반복을 해주며 json으로 변환해줄 수 있도록 하였으며 
이 또한 값이 없을 시 에는 반복하지 않도록 하였습니다.

리콜 내역과 무상 수리 내역에 필요한 정보들을 위한 소스입니다.
리콜내역이 있을 경우 Recall 객체를 리턴해주고 없을 경우엔 null을 리턴해주도록 하였습니다.
반복을 통해 리콜에 대한 제목과 내용을 가져오며 strong은 제목 , p는 내용으로 구현하였으며
리콜에 대한 날짜도 가져올 수 있도록 하였습니다.

무상수리내역도 리콜내역과 동일하게 무상수리가 있을 경우 Repair 객체를 리턴해주고 없을 경우 null을 리턴해줍니다
리콜내역과 동일하게 제목, 내용, 날짜를 가져올 수 있도록 하였습니다.

다음은 App 입니다. 112고8128의 번호판을 가져와 정보들을 앱에 볼 수 있도록 goCarno함수에서 웹 서비스를 호출하여
setState값을 통해 리콜내역, 수리내역, 리콜제목, 수리제목을 가져올 수 있도록 구현하였습니다.
보여지는 부분은 모두 render부분에서 처리하였습니다. 

디자인은 아직 미완성 상태이며 사진과 같이 제목과 내용들을 한눈에 볼 수 있도록 하였습니다.

15) 테스트 결과
다음은 테스트결과입니다.
URL에 Get방식으로 차량번호를 임시로 보내게 되면 사진과 같이 json으로 정보들을 받을 수 있는 것을 확인할 수 있습니다
json으로 받은 정보를 기반으로 APP을 간단하게 만들어 보았습니다
자동차 번호판 사진을 찍으면 번호판의 번호를 가져와 출력해주고 차량 리콜현황과 무상점검수리내역을 한눈에 볼 수 있도록
구현하였습니다. 현재는 자동차 번호판 사진을 찍으면 번호를 인식하는 부분의 코드를 구현 중에 있어 임시의 번호를 서버로 보내주어
정보들을 얻을 수 있도록 구현하였습니다.

<향후계획>
추후에 차량인식기능은 파이썬을 통해 구현을 완료하고 난 후, 실제로 번호판 사진을 
찍은 후 차량번호를 인식하여 리콜정보를 확인할 수 있도록 적용할 예정이며 사용자가 보기 편하도록
APP 디자인을 개선하고 리팩토링을 통해 가독성과 유지보수를 높이는 방향으로 최종발표까지 진행할 예정입니다.

